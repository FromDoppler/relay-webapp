<section class="my-plans--container">
  <div class="section--wrapper">
    <h2>
      {{ 'plans_text' | translate }}
    </h2>
    <p>{{ 'my_plan_subtitle' | translate }}</p>
    <label class="color--orange" ng-if="vm.isAccountClosed && vm.isFreeTrial">{{ 'my_plan_free_trial_closed' | translate }}</label>
    <label class="color--orange" ng-if="vm.isAccountClosed && !vm.isFreeTrial">{{ 'my_plan_account_closed' | translate }}</label>
  </div>
  <div class="section--wrapper my-plan--info-container">
    <div class="item flex flex--wrap first">
      <div class="flex one flex--wrap price">
        <label class="width--full special uppercase">{{ 'price_text' | translate }}</label>
        <p ng-show="vm.isFreeTrial" class="my-plan-price">{{'free_trial_text' | translate}}</p>
        <p ng-show="!vm.isFreeTrial">{{vm.currency | translate}} {{vm.currentPlanPrice | number:2}}</p>
        <spinner class="spinner" ng-class="vm.planInfoLoader ?  'show':'hide'"></spinner>
      </div>
      <div class="flex one flex--wrap">
        <label class="width--full special uppercase">{{ 'amount_of_emails_text' | translate }}</label>
        <p class="emails-amount">{{vm.currentPlanEmailsAmount | number}}</p>
        <spinner class="spinner" ng-class="vm.planInfoLoader ?  'show':'hide'"></spinner>
      </div>
      <div class="flex one flex--wrap email-price">
        <label class="width--full special uppercase">{{ 'my_plan_cost_email' | translate }}</label>
        <p ng-show="vm.isFreeTrial">-</p>
        <p ng-show="!vm.isFreeTrial">{{vm.currency | translate}} {{vm.currentPlanEmailPrice | number:5}}</p>
        <spinner class="spinner" ng-class="vm.planInfoLoader ?  'show':'hide'"></spinner>
      </div>
      <div class="flex one flex--wrap">
        <button ng-show="vm.hasScheduledPlan" class="button button--small" ng-class="vm.pricingChartDisplayed ? 'button--disabled' : 'active'" ng-click="vm.showPricingChart();" du-smooth-scroll="pricing-chart--container" offset="20">{{ 'change_plan_text' | translate }}</button>
      </div>
    </div>
    <div class="item flex flex--wrap">
      <div class="flex one flex--wrap">
        <label class="width--full special uppercase">{{ 'my_plan_consumption' | translate }}</label>
        <p class="month-consumption">{{vm.currentMonthlyCount | number}}</p>
        <spinner class="spinner" ng-class="vm.planStatusInfoLoader ?  'show':'hide'"></spinner>
      </div>
      <div class="flex one flex--wrap">
        <label class="width--full special uppercase">{{ 'my_plan_emails_sent' | translate }}</label>
        <p class="extra-emails">{{vm.extraEmailsSent | number}}</p>
        <spinner class="spinner" ng-class="vm.planStatusInfoLoader ?  'show':'hide'"></spinner>
      </div>
      <div class="flex two flex--wrap">
        <label class="width--full special uppercase" ng-if="vm.accountEndDate && vm.isFreeTrial">{{ 'my_plan_free_trial_end_label' | translate }}</label>
        <label class="width--full special uppercase" ng-if="vm.accountEndDate && !vm.isFreeTrial">{{ 'my_plan_account_end_label' | translate }}</label>
        <label class="width--full special uppercase" ng-if="!vm.accountEndDate">{{ 'my_plan_renewal_date' | translate }}</label>
        <p class="renewal-date" ng-if="vm.accountEndDate">{{ vm.accountEndDate | date :'mediumDate' :'+0' }}</p>        
        <p class="renewal-date" ng-if="!vm.accountEndDate">{{ vm.resetDate | date :'mediumDate' :'+0' }}</p>
        <spinner class="spinner" ng-class="vm.planStatusInfoLoader ?  'show':'hide'"></spinner>
      </div>
    </div>
    <div class="item flex flex--wrap">
      <div class="flex one flex--wrap">
        <label class="width--full special uppercase">{{ 'attr_dedicated_ip_premium' | translate }}</label>
        <p ng-show="!vm.planStatusInfoLoader" class="ip-count">{{ vm.currentIpsPlanCount }}</p>
        <spinner class="spinner" ng-class="vm.planStatusInfoLoader ?  'show':'hide'"></spinner>
      </div>
      <div class="flex three flex--wrap" ng-if="!vm.hasScheduledPlan">
          <label class="width--full special uppercase">{{ 'my_plan_next_plan' | translate }}</label>
          <p class="extra-emails">{{vm.nextPlanIncludedDeliveries | number}} &#42;</p>
          <spinner class="spinner" ng-class="vm.planStatusInfoLoader ?  'show':'hide'"></spinner>
      </div>
    </div>
    <div class="flex flex--wrap scheduled--plan-message" ng-if="!vm.hasScheduledPlan">
        <p><i>&#42; {{ 'scheduled_plan_message' | translate }}</i></p>
    </div>
  </div>
  <div id="pricing-chart--container" class="section--wrapper pricing-chart--container" ng-class="vm.pricingChartDisplayed ? 'show': 'hide'">
    <h5 class="special uppercase">{{ 'my_plan_pricing_chart' | translate }}</h5>
    <p>{{'my_plan_pricing_chart_description' | translate }}</p>
    <div class="section--wrapper plan--slider-container">
      <p ng-bind-html="'my_plan_pricing_chart_slider_title' | translate:{emailsSuggestedAmount: vm.emailsSuggestedAmount}"></p>
      <rzslider rz-slider-model="vm.slider.value" rz-slider-options="vm.slider.options"></rzslider>
      <div class="plan--drag-container"><svg class="icon ok-icon" ng-class="vm.hideDragMe ? 'hide': 'show'">
        <use ng-if="vm.langUsed == 'en'" xlink:href="/images/sprite.svg#doppler-icon-drag-me"></use>
        <use ng-if="vm.langUsed == 'es'" xlink:href="/images/sprite.svg#doppler-icon-arrastra"></use>
      </svg></div>
    </div>
    <div class="section--wrapper plan--box-container">
      <ul ng-class="!vm.showPremiumPlanBox ? 'basic':'pro'">
        <li class="special">
          <span ng-if="!vm.showPremiumPlanBox">{{ 'basic_plan_text' | translate }} {{ vm.leftPlanName | translate }}</span>
          <span ng-if="vm.showPremiumPlanBox">{{ 'pro_plan_text' | translate }} {{ vm.leftPlanName | translate }}</span>
        </li>
        <li>{{'cost_email' | translate}} {{vm.currency | translate}} {{vm.leftCostEmail | number:5}}</li>
        <li>{{'attr_api' | translate}}</li>
        <li>{{'attr_dkim' | translate}}</li>
        <li>{{'attr_metrics_and_reports' | translate}}</li>
        <li class="strong">
          <span class="hidden-feature" ng-class="vm.showPremiumPlanBox ? 'show':''">{{'attr_dedicated_ip' | translate}} {{vm.ipsPlanCount}}</span>
        </li>
        <li>
          <span class="hidden-feature">
            <svg class="icon star-icon">
              <use xlink:href="/images/sprite.svg#doppler-icon-star-icon"></use>
            </svg>
          </span>
        </li>
        <li>
          <span class="hidden-feature">
            <svg class="icon star-icon">
              <use xlink:href="/images/sprite.svg#doppler-icon-star-icon"></use>
            </svg>
          </span>
        </li>
        <li class="strong">
          <h2 class="special plan--price-big">{{vm.currency | translate}} {{vm.leftPlanPrice | number:2 | numberFormat}}</h2>
          <a ng-class="!vm.disableLeftPlan ? 'show':''" class="hidden-feature-by-display button button--small" href="#/settings/billing?plan={{vm.leftPlanName}}">{{'change_plan' | translate}}</a>
          <a ng-class="vm.disableLeftPlan ? 'show':''" class="button button--small button--disabled hidden-feature-by-display">{{'change_plan' | translate}}</a>
        </li>
      </ul>
      <ul ng-class="!vm.showPremiumPlanBox ? 'pro':'premium'">
        <li class="special">
          <span ng-if="!vm.showPremiumPlanBox">{{ 'pro_plan_text' | translate }} {{ vm.leftPlanName | translate }}</span>
          <span ng-if="vm.showPremiumPlanBox">{{ 'premium_plan_text' | translate }} {{ vm.leftPlanName | translate }}</span>
        </li>
        <li>{{'cost_email' | translate}} {{vm.currency | translate}} {{vm.rightCostEmail | number:5}}</li>
        <li>{{'attr_api' | translate}}</li>
        <li>{{'attr_dkim' | translate}}</li>
        <li>{{'attr_metrics_and_reports' | translate}}</li>
        <li class="strong">
          <span ng-if="!vm.showPremiumPlanBox">{{'attr_dedicated_ip' | translate}} {{vm.ipsPlanCount}}</span>
          <span ng-if="vm.showPremiumPlanBox">{{'attr_dedicated_ip_premium' | translate}}</span>
        </li>
        <li class="strong">
          <span class="hidden-feature" ng-class="vm.showPremiumPlanBox ? 'show':''">
            {{'account_manager_text' | translate}}
            <svg class="icon star-icon">
              <use xlink:href="/images/sprite.svg#doppler-icon-star-icon"></use>
            </svg>
          </span>
        </li>
        <li>
          <span class="hidden-feature" ng-class="vm.showPremiumPlanBox ? 'show':''">
            {{'vip_support_text' | translate}}
            <svg class="icon star-icon">
              <use xlink:href="/images/sprite.svg#doppler-icon-star-icon"></use>
            </svg>
          </span>
        </li>
        <li>
          <h2 ng-class="!vm.showPremiumPlanBox ? 'show':''" class="hidden-feature special plan--price-big">{{vm.currency | translate}} {{vm.rightPlanPrice | number:2 | numberFormat}}</h2>
          <a ng-class="!vm.disableRightPlan && !vm.showPremiumPlanBox ? 'show':''" class="hidden-feature-by-display button button--small" href="#/settings/billing?plan={{vm.rightPlanName}}">{{'change_plan' | translate}}</a>
          <a ng-class="!vm.disableRightPlan && vm.showPremiumPlanBox ? 'show':''" class="hidden-feature-by-display button button--small" target="_blank" href="https://www.dopplerrelay.com/contacto">{{'contact_us_text' | translate}}</a>
          <a ng-class="vm.disableRightPlan ? 'show':''" class="button button--small button--disabled hidden-feature-by-display">{{'change_plan' | translate}}</a>
        </li>
      </ul>
    </div>
    <hr class="default"/>
  </div>
</section>